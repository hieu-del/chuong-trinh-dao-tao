<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theo dõi Chương trình Đào tạo Toàn khóa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#0866ff',
                        headerRow: '#242526',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.5s, color 0.5s;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #b0b3b8; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #3e4042; }
        ::-webkit-scrollbar-thumb:hover { background: #65676b; }

        /* Status Button */
        .status-btn {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 0.375rem; 
            border-width: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.75rem;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .status-btn[data-state="0"] { border-color: #d1d5db; background-color: transparent; color: transparent; }
        .dark .status-btn[data-state="0"] { border-color: #4b5563; background-color: rgba(58, 59, 60, 0.5); }
        .status-btn[data-state="0"]:hover { border-color: #9ca3af; }
        .status-btn[data-state="1"] { border-color: #f59e0b; background-color: rgba(245, 158, 11, 0.15); color: #f59e0b; box-shadow: 0 0 10px rgba(245, 158, 11, 0.3); }
        .status-btn[data-state="1"] i::before { content: "\f017"; font-family: "Font Awesome 6 Free"; font-weight: 400; }
        .status-btn[data-state="2"] { border-color: #0866ff; background-color: #0866ff; color: white; box-shadow: 0 0 15px rgba(8, 102, 255, 0.5); transform: scale(1.1); }
        .status-btn[data-state="2"] i::before { content: "\f00c"; font-family: "Font Awesome 6 Free"; font-weight: 900; }

        /* Row Styling */
        tr.planned td { background-color: rgba(245, 158, 11, 0.05) !important; }
        .dark tr.planned td { background-color: rgba(245, 158, 11, 0.1) !important; }
        tr.completed td { background-color: rgba(8, 102, 255, 0.08) !important; opacity: 0.7; }
        .dark tr.completed td { background-color: rgba(8, 102, 255, 0.15) !important; color: #b0b3b8; }
        tr.completed td.font-mono { text-decoration: line-through; }

        /* Sticky Header */
        .glass-header { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0, 0, 0, 0.05); }
        .dark .glass-header { background: rgba(36, 37, 38, 0.85); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }

        /* Background */
        .tech-bg { position: relative; background-color: #f0f2f5; background-image: linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px); background-size: 40px 40px; background-attachment: fixed; }
        .dark .tech-bg { background-color: #18191a; background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px); }

        /* Ambient Orbs */
        .ambient-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 999; overflow: hidden; pointer-events: none; }
        .dark .ambient-container { mix-blend-mode: screen; }
        :not(.dark) .ambient-container { mix-blend-mode: multiply; opacity: 0.7; }
        .orb { position: absolute; border-radius: 50%; filter: blur(90px); opacity: 0.18; animation-timing-function: ease-in-out; animation-iteration-count: infinite; animation-direction: alternate; }
        .dark .orb { opacity: 0.18; filter: blur(80px); }
        
        .orb-1 { width: 500px; height: 500px; background: #0866ff; top: 5%; left: 5%; animation: move-1 28s infinite alternate; }
        .orb-2 { width: 450px; height: 450px; background: #d946ef; bottom: 10%; right: 5%; animation: move-2 32s infinite alternate-reverse; }
        .orb-3 { width: 350px; height: 350px; background: #f59e0b; top: 40%; left: 45%; animation: move-3 36s infinite alternate; }
        .orb-4 { width: 400px; height: 400px; background: #14b8a6; bottom: 15%; left: 10%; animation: move-4 40s infinite alternate-reverse; }
        .orb-5 { width: 300px; height: 300px; background: #f43f5e; top: 15%; right: 20%; animation: move-5 34s infinite alternate; }
        @keyframes move-1 { 0% { transform: translate(0,0) scale(1); } 100% { transform: translate(10vw, -5vh) scale(1.1); } }
        @keyframes move-2 { 0% { transform: translate(0,0) scale(1); } 100% { transform: translate(-10vw, 15vh) scale(0.9); } }
        @keyframes move-3 { 0% { transform: translate(0,0) scale(0.8); } 100% { transform: translate(25vw, -15vh) scale(1); } }
        @keyframes move-4 { 0% { transform: translate(0,0) scale(1.1); } 100% { transform: translate(0, -20vh) scale(0.9); } }
        @keyframes move-5 { 0% { transform: translate(0,0) scale(0.9); } 100% { transform: translate(-5vw, -10vh) scale(1.2); } }

        /* Group Header */
        tr.group-header td { background-color: #e7f3ff; color: #1c1e21; font-weight: 700; border-top: 2px solid #0866ff; }
        .dark tr.group-header td { background-color: #252f3f !important; color: #93c5fd !important; border-top: 1px solid #374151; border-bottom: 1px solid #374151; }

        .legend-badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; border: 1px solid; cursor: default; user-select: none; }
        
        /* PREREQUISITE LINK STYLE - UPDATED TO TEAL TO MATCH COURSE CODE */
        .prereq-link { 
            color: #0d9488; /* Teal 600 - Same as course-code-style */
            cursor: pointer; 
            font-weight: 600; 
            transition: all 0.2s; 
            text-decoration: none; 
            display: inline-block;
            font-family: monospace; /* Looks like code */
        }
        .dark .prereq-link { 
            color: #2dd4bf; /* Teal 400 - Same as dark course-code-style */
        }
        .prereq-link:hover { 
            color: #0f766e; /* Teal 700 */
            transform: translateY(-1px); 
            text-decoration: underline; 
        }
        .dark .prereq-link:hover { 
            color: #5eead4; /* Teal 300 */
        }
        
        /* Highlight animation */
        .highlight-target > td { animation: highlight-row-anim 2s ease-in-out; }
        @keyframes highlight-row-anim { 0%, 100% { background-color: transparent; } 10%, 50% { background-color: rgba(8, 102, 255, 0.3); } }

        .course-code-style { color: #0d9488; }
        .dark .course-code-style { color: #2dd4bf; }

        /* User Note Input */
        .user-note-input { width: 100%; background: transparent; border: none; border-bottom: 1px dashed #cbd5e1; font-size: 0.9rem; padding: 4px 0; color: #333; outline: none; transition: all 0.2s; font-family: 'Inter', sans-serif; }
        .dark .user-note-input { color: #e2e8f0; border-bottom-color: #475569; }
        .user-note-input:focus { border-bottom-style: solid; border-bottom-color: #3b82f6; background-color: rgba(59, 130, 246, 0.05); }
        .user-note-input::placeholder { color: #94a3b8; font-style: italic; font-size: 0.8rem; }

        .search-input { width: 100%; background-color: rgba(255, 255, 255, 0.7); border: none; border-radius: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.65rem; color: #050505; outline: none; transition: box-shadow 0.2s; }
        .dark .search-input { background-color: rgba(58, 59, 60, 0.7); color: #e4e6eb; }
        .search-input:focus { box-shadow: 0 0 0 2px rgba(8, 102, 255, 0.5); }
        .search-input::placeholder { color: #9ca3af; }
        thead th { z-index: 40; }
    </style>
</head>
<body class="tech-bg text-[#1c1e21] dark:text-[#e4e6eb] min-h-screen pb-20 transition-colors duration-500">

    <div class="ambient-container">
        <div class="orb orb-1"></div><div class="orb orb-2"></div><div class="orb orb-3"></div><div class="orb orb-4"></div><div class="orb orb-5"></div>
    </div>

    <nav class="fixed top-0 left-0 right-0 z-50 glass-header shadow-sm transition-colors duration-300">
        <div class="max-w-[1800px] mx-auto px-4">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-3">
                    <div class="bg-[#0866ff] text-white p-2 rounded-full shadow-md"><i class="fa-solid fa-graduation-cap text-xl"></i></div>
                    <span class="font-bold text-lg tracking-tight hidden sm:block text-[#050505] dark:text-[#e4e6eb]">QUẢN LÝ ĐÀO TẠO</span>
                </div>
                <div class="flex-1 mx-4 sm:mx-10 flex flex-col justify-center max-w-md group">
                    <div class="flex justify-between text-xs font-semibold mb-1 text-[#65676b] dark:text-[#b0b3b8]"><span>Tiến độ hoàn thành</span><span id="progress-text">0%</span></div>
                    <div class="w-full bg-[#e4e6eb] dark:bg-[#3a3b3c] rounded-full h-2.5 overflow-hidden backdrop-blur-sm border border-gray-200 dark:border-gray-700"><div id="progress-bar" class="bg-[#0866ff] h-2.5 rounded-full transition-all duration-700 ease-out" style="width: 0%"></div></div>
                </div>
                <button id="theme-toggle" class="p-2 rounded-full bg-[#e4e6eb] dark:bg-[#3a3b3c] hover:opacity-80 transition-all focus:outline-none text-black dark:text-yellow-500 w-10 h-10 flex items-center justify-center"><i id="theme-icon" class="fa-solid fa-sun text-xl"></i></button>
            </div>
        </div>
    </nav>

    <div class="max-w-[1800px] mx-auto pt-24 px-4 relative z-10">
        <div class="flex flex-col sm:flex-row sm:items-end justify-between mb-6 gap-4">
            <div>
                <h1 class="text-3xl font-bold text-[#050505] dark:text-[#e4e6eb] mb-3 drop-shadow-sm">Chương trình đào tạo</h1>
                <div class="flex flex-wrap gap-3 items-center">
                    <div class="legend-badge bg-gray-100 dark:bg-[#3a3b3c] border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300"><div class="w-2.5 h-2.5 rounded-sm border-2 border-gray-400 dark:border-gray-500"></div>Chưa học</div>
                    <div class="legend-badge bg-amber-50 border-amber-200 text-amber-600 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-400"><div class="w-2.5 h-2.5 flex items-center justify-center text-[10px]"><i class="fa-regular fa-clock"></i></div>Sắp học</div>
                    <div class="legend-badge bg-blue-50 border-blue-200 text-[#0866ff] dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-400"><div class="w-2.5 h-2.5 flex items-center justify-center text-[10px] font-bold"><i class="fa-solid fa-check"></i></div>Đã học</div>
                </div>
            </div>
            <div class="flex flex-col sm:flex-row gap-3">
                <div class="bg-white/80 dark:bg-[#242526]/80 backdrop-blur px-5 py-3 rounded-xl border border-amber-100 dark:border-amber-900/30 flex items-center gap-4 shadow-md">
                    <div class="text-right"><div class="text-[10px] text-gray-500 dark:text-gray-400 uppercase font-bold tracking-wider mb-1">Tín chỉ sắp học</div><div class="flex items-baseline justify-end gap-1"><div class="text-2xl font-bold text-amber-600 dark:text-amber-500" id="planned-credits">0</div><div class="text-sm text-gray-500 font-medium">TC</div></div></div>
                    <div class="h-10 w-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400"><i class="fa-regular fa-clock text-lg"></i></div>
                </div>
                <div class="bg-white/80 dark:bg-[#242526]/80 backdrop-blur px-5 py-3 rounded-xl border border-gray-200 dark:border-[#3e4042] flex items-center gap-4 shadow-md">
                    <div class="text-right"><div class="text-[10px] text-gray-500 dark:text-gray-400 uppercase font-bold tracking-wider mb-1">Tín chỉ tích lũy</div><div class="flex items-baseline justify-end gap-1"><div class="text-2xl font-bold text-[#0866ff] dark:text-blue-400" id="total-credits">0</div><div class="text-sm text-gray-500 font-medium">/ 145</div></div></div>
                    <div class="h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-[#0866ff] dark:text-blue-400"><i class="fa-solid fa-chart-pie text-lg"></i></div>
                </div>
            </div>
        </div>

        <div class="bg-white/80 dark:bg-[#242526]/90 backdrop-blur-xl rounded-xl shadow-lg border border-gray-200 dark:border-[#3e4042] overflow-hidden transition-colors duration-300">
            <div class="overflow-x-auto max-h-[78vh]">
                <table class="w-full text-left border-collapse relative">
                    <thead class="bg-gray-100 dark:bg-[#18191a] text-gray-700 dark:text-[#b0b3b8] text-xs uppercase font-bold border-b border-gray-200 dark:border-[#3e4042] sticky top-0 z-30 shadow-sm">
                         <tr>
                            <th class="p-3 text-center w-14 sticky left-0 z-40 bg-gray-100 dark:bg-[#18191a] border-r border-gray-200 dark:border-[#3e4042]">TT</th>
                            <th class="p-3 text-center w-14 border-r border-gray-200 dark:border-[#3e4042]">STT</th>
                            <th class="p-3 text-center w-32 border-r border-gray-200 dark:border-[#3e4042] align-bottom pb-2"><div class="flex flex-col gap-1 w-full"><span>Mã HP</span><input type="text" id="search-code" placeholder="Tìm..." class="search-input" /></div></th>
                            <th class="p-3 min-w-[220px] border-r border-gray-200 dark:border-[#3e4042] align-bottom pb-2"><div class="flex flex-col gap-1 w-full"><span>Tên học phần</span><input type="text" id="search-name" placeholder="Tìm tên..." class="search-input" /></div></th>
                            <th class="p-3 min-w-[200px] border-r border-gray-200 dark:border-[#3e4042]">Ghi chú</th>
                            <th class="p-3 text-center w-16 border-r border-gray-200 dark:border-[#3e4042] align-bottom pb-2"><div class="flex flex-col gap-1 w-full"><span>TC</span><input type="text" id="search-credits" placeholder="..." class="search-input" /></div></th>
                            <th class="p-3 text-center w-16 border-r border-gray-200 dark:border-[#3e4042]">LT</th>
                            <th class="p-3 text-center w-16 border-r border-gray-200 dark:border-[#3e4042]">TH</th>
                            <th class="p-3 text-center w-24 align-bottom pb-2"><div class="flex flex-col gap-1 w-full"><span>Tiên quyết</span><input type="text" id="search-prereq" placeholder="..." class="search-input" /></div></th>
                        </tr>
                    </thead>
                    <tbody class="text-sm divide-y divide-gray-200 dark:divide-[#3e4042] text-[#050505] dark:text-[#e4e6eb]" id="curriculum-body">
                         
                        <!-- HK1 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 1</td></tr>
                        <!-- Row 1 -->
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-id="BUS101" data-credits="3" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">1</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">BUS101</td><td class="p-3 font-medium">Tinh thần khởi nghiệp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="BUS101"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="INT306" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">2</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">INT306</td><td class="p-3 font-medium">Nhập môn ngành</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT306"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-id="INT310" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">3</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">INT310</td><td class="p-3 font-medium">Trải nghiệm ngành, nghề</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT310"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="LAW101" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">4</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">LAW101</td><td class="p-3 font-medium">Pháp luật đại cương</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="LAW101"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA035" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">5</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">MCA035</td><td class="p-3 font-medium">Kỹ năng khám phá bản thân</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA035"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="SKL101" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">6</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">SKL101</td><td class="p-3 font-medium">Phương pháp học đại học</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="SKL101"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>

                        <!-- HK2 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 2</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="POL105" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">7</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">POL105</td><td class="p-3 font-medium">Triết học Mác - Lênin</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="POL105"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA038" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">MCA038</td><td class="p-3 font-medium">Kỹ năng làm việc nhóm hiệu quả</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA038"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA035')">MCA035</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA039" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">9</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">MCA039</td><td class="p-3 font-medium">Kỹ năng thuyết trình</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA039"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA035')">MCA035</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="NAS202" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">10</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">NAS202</td><td class="p-3 font-medium">Toán cao cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="NAS202"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="INT304" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">11</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">INT304</td><td class="p-3 font-medium">Kiến trúc máy tính</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT304"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="8" data-id="DEE104" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">12</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">DEE104</td><td class="p-3 font-medium">GDQP & An ninh <span class="text-red-500">(*)</span></td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="DEE104"></td><td class="p-3 text-center font-bold text-gray-400">8</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">165</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="GRA401" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">13</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">GRA401</td><td class="p-3 font-medium">Cơ sở thiết kế đồ họa</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA401"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA418" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">14</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">GRA418</td><td class="p-3 font-medium">Hình họa</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA418"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>

                        <!-- (Tự chọn KTĐC 1 - 15,16) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - Kiến thức đại cương 1 (Chọn 3/6 tín chỉ)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK2_1" data-id="SKL202" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">15</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">SKL202</td><td class="p-3 font-medium">Kỹ năng hành chính văn phòng</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="SKL202"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK2_1" data-id="ENG201" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">16</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">ENG201</td><td class="p-3 font-medium">Tiếng Anh giao tiếp 1</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="ENG201"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>

                        <!-- (Tự chọn GDTC 1 - 17-23) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - GDTC 1 (Chọn 1 môn)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT120" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">17</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT120</td><td class="p-3 font-medium">GDTC 1 - Bóng đá sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT120"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT121" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">18</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT121</td><td class="p-3 font-medium">GDTC 1 - Bóng chuyền sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT121"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT122" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">19</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT122</td><td class="p-3 font-medium">GDTC 1 - Bóng rổ sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT122"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT123" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">20</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT123</td><td class="p-3 font-medium">GDTC 1 - Bơi lội sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT123"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT124" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">21</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT124</td><td class="p-3 font-medium">GDTC 1 - Gym sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT124"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT125" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">22</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT125</td><td class="p-3 font-medium">GDTC 1 - Cờ vua sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT125"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK2_GDTC" data-id="PHT106" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">23</td><td class="p-3 text-center font-mono font-semibold course-code-style course-code">PHT106</td><td class="p-3 font-medium">GDTC 1 - Võ thuật sơ cấp</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT106"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>

                        <!-- HK3 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 3</td></tr>
                        <!-- (Rows 24-29) -->
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA403" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">24</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA403</td><td class="p-3 font-medium">Thiết kế đồ họa cơ bản 1 (Photoshop)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA403"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA404" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">25</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA404</td><td class="p-3 font-medium">Thiết kế đồ họa cơ bản 2 (Illustrator)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA404"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="BUS102" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">26</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">BUS102</td><td class="p-3 font-medium">Quản trị sự thay đổi</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="BUS102"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA036" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">27</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MCA036</td><td class="p-3 font-medium">KN xây dựng mục tiêu & tạo động lực</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA036"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA038')">MCA038</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA039')">MCA039</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="INT4401" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">28</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT4401</td><td class="p-3 font-medium">Mạng máy tính</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT4401"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="POL106" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">29</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">POL106</td><td class="p-3 font-medium">Kinh tế chính trị Mác - Lênin</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="POL106"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('POL105')">POL105</span></td></tr>

                        <!-- (Tự chọn KTĐC 2 - 30,31) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - KTĐC 2 (Chọn 3/6 tín chỉ)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK3_2" data-id="ENG202" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">ENG202</td><td class="p-3 font-medium">Tiếng Anh giao tiếp 2</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="ENG202"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('ENG201')">ENG201</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK3_2" data-id="VIE201" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">31</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">VIE201</td><td class="p-3 font-medium">Kỹ năng sử dụng tiếng Việt</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="VIE201"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>

                        <!-- (Tự chọn GDTC 2 - 32-38) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - GDTC 2 (Chọn 1 môn)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT107" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">32</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT107</td><td class="p-3 font-medium">GDTC 2 - Bóng đá cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT107"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT108" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">33</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT108</td><td class="p-3 font-medium">GDTC 2 - Bóng chuyền cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT108"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT109" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">34</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT109</td><td class="p-3 font-medium">GDTC 2 - Bóng rổ cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT109"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT110" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">35</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT110</td><td class="p-3 font-medium">GDTC 2 - Bơi lội cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT110"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT111" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">36</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT111</td><td class="p-3 font-medium">GDTC 2 - Gym cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT111"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT112" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">37</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT112</td><td class="p-3 font-medium">GDTC 2 - Cờ vua cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT112"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK3_GDTC" data-id="PHT119" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">38</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT119</td><td class="p-3 font-medium">GDTC 2 - Võ thuật cơ bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT119"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"></td></tr>

                        <!-- HK4 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 4</td></tr>
                        <!-- (Rows 39-45) -->
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="POL107" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">39</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">POL107</td><td class="p-3 font-medium">Chủ nghĩa xã hội khoa học</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="POL107"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('POL106')">POL106</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA040" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">40</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MCA040</td><td class="p-3 font-medium">KN giải quyết vấn đề - Ra quyết định</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA040"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA038')">MCA038</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA039')">MCA039</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="INT4403" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">41</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT4403</td><td class="p-3 font-medium">Hệ điều hành Linux</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT4403"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA037" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">42</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MCA037</td><td class="p-3 font-medium">Kỹ năng tư duy sáng tạo</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA037"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA038')">MCA038</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA039')">MCA039</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="INT322" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">43</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT322</td><td class="p-3 font-medium">Lập trình Java</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT322"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA426" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">44</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA426</td><td class="p-3 font-medium">Phát triển ý tưởng sáng tạo</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA426"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA419" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA419</td><td class="p-3 font-medium">Nghệ thuật chữ và trang trí</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA419"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>

                        <!-- (Tự chọn KTĐC 3 - 46,47) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - KTĐC 3 (Chọn 3/6 tín chỉ)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK4_3" data-id="SOS206" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">46</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">SOS206</td><td class="p-3 font-medium">Mỹ học đại cương</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="SOS206"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK4_3" data-id="MAN201" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">47</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MAN201</td><td class="p-3 font-medium">Quản trị học</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MAN201"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>

                        <!-- (Tự chọn GDTC 3 - 48-54) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - GDTC 3 (Chọn 1 môn)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT126" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">48</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT126</td><td class="p-3 font-medium">GDTC 3 - Võ thuật nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT126"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT119')">PHT119</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT113" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">49</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT113</td><td class="p-3 font-medium">GDTC 3 - Bóng đá nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT113"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT107')">PHT107</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT114" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">50</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT114</td><td class="p-3 font-medium">GDTC 3 - Bóng chuyền nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT114"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT108')">PHT108</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT115" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">51</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT115</td><td class="p-3 font-medium">GDTC 3 - Bóng rổ nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT115"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT109')">PHT109</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT116" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">52</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT116</td><td class="p-3 font-medium">GDTC 3 - Bơi lội nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT116"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT110')">PHT110</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT117" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">53</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT117</td><td class="p-3 font-medium">GDTC 3 - Gym nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT117"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT111')">PHT111</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="1" data-group="TC_HK4_GDTC" data-id="PHT118" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">54</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">PHT118</td><td class="p-3 font-medium">GDTC 3 - Cờ vua nâng cao</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="PHT118"></td><td class="p-3 text-center font-bold">1</td><td class="p-3 text-center"></td><td class="p-3 text-center">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('PHT112')">PHT112</span></td></tr>

                        <!-- HK5 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 5</td></tr>
                        <!-- (Rows 55-60) -->
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="4" data-id="GRA421" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">55</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA421</td><td class="p-3 font-medium">Thiết kế đồ họa 2D</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA421"></td><td class="p-3 text-center font-bold">4</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">60</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA418')">GRA418</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA407" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">56</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA407</td><td class="p-3 font-medium">Đồ họa dàn trang (Indesign)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA407"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="4" data-id="INT323" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">57</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT323</td><td class="p-3 font-medium">Cơ sở dữ liệu</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT323"></td><td class="p-3 text-center font-bold">4</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA041" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">58</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MCA041</td><td class="p-3 font-medium">Kỹ năng lãnh đạo</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA041"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA036')">MCA036</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA037')">MCA037</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA040')">MCA040</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="NAS204" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">59</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">NAS204</td><td class="p-3 font-medium">Vật lý đại cương</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="NAS204"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="POL109" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">60</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">POL109</td><td class="p-3 font-medium">Tư tưởng Hồ Chí Minh</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="POL109"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('POL107')">POL107</span></td></tr>

                        <!-- (Tự chọn KTĐC 4 - 61,62) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - KTĐC 4 (Chọn 3/6 tín chỉ)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK5_4" data-id="MAR201" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">61</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MAR201</td><td class="p-3 font-medium">Marketing căn bản</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MAR201"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK5_4" data-id="SOS205" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">62</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">SOS205</td><td class="p-3 font-medium">Giao tiếp đa văn hóa</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="SOS205"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>

                        <!-- HK6 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 6</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="2" data-id="POL108" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">63</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">POL108</td><td class="p-3 font-medium">Lịch sử Đảng Cộng sản VN</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="POL108"></td><td class="p-3 text-center font-bold">2</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('POL109')">POL109</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="NAS203" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">64</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">NAS203</td><td class="p-3 font-medium">Thống kê ứng dụng</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="NAS203"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="0" data-id="MCA042" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">65</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">MCA042</td><td class="p-3 font-medium">Kỹ năng tìm việc</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="MCA042"></td><td class="p-3 text-center font-bold">0</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">8</td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA036')">MCA036</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA037')">MCA037</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('MCA040')">MCA040</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="NAS101" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">66</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">NAS101</td><td class="p-3 font-medium">Môi trường và con người</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="NAS101"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA422" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">67</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA422</td><td class="p-3 font-medium">Biên tập phim (Premiere)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA422"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA414" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">68</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA414</td><td class="p-3 font-medium">Đồ họa động (After Effects)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA414"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>

                        <!-- (Tự chọn KTCN 1 - 69,70) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - KT Chuyên ngành 1 (Chọn 3/6 tín chỉ)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK6_1" data-id="GRA310" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">69</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA310</td><td class="p-3 font-medium">Nhiếp ảnh & Quay phim</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA310"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK6_1" data-id="GRA425" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">70</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA425</td><td class="p-3 font-medium">Thiết kế hiệu ứng Game 2D</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA425"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>

                        <!-- HK7 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 7</td></tr>
                        <!-- (Rows 71-75) -->
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA423" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">71</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA423</td><td class="p-3 font-medium">Thiết kế bộ nhận diện thương hiệu</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA423"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA418')">GRA418</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="4" data-id="GRA424" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">72</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA424</td><td class="p-3 font-medium">Thiết kế đồ họa 3D (Blender/Maya)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA424"></td><td class="p-3 text-center font-bold">4</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">60</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="ELE326" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">73</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">ELE326</td><td class="p-3 font-medium">Linh kiện điện tử</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="ELE326"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="GRA427" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">74</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA427</td><td class="p-3 font-medium">Đồ án chuyên ngành Đồ họa/Game</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA427"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA421')">GRA421</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA424')">GRA424</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-id="SOS102" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">75</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">SOS102</td><td class="p-3 font-medium">Văn hiến Việt Nam</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="SOS102"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">45</td><td class="p-3 text-center"></td><td class="p-3 text-center"></td></tr>

                        <!-- (Tự chọn KTCN 2 - 76,77) -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - KT Chuyên ngành 2 (Chọn 3/6 tín chỉ)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK7_2" data-id="GRA409" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">76</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA409</td><td class="p-3 font-medium">Thiết kế giao diện ứng dụng (Figma)</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="GRA409"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA403')">GRA403</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA404')">GRA404</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="3" data-group="TC_HK7_2" data-id="INT4406" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">77</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT4406</td><td class="p-3 font-medium">Lập trình hướng đối tượng</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT4406"></td><td class="p-3 text-center font-bold">3</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">30</td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('INT324')">INT324</span></td></tr>

                        <!-- HK8 -->
                        <tr class="bg-gray-50 dark:bg-[#3a3b3c]"><td class="sticky left-0 bg-gray-50 dark:bg-[#3a3b3c] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-bold text-[#0866ff] dark:text-[#60a5fa]">HỌC KỲ 8</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="5" data-id="INT551" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">78</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT551</td><td class="p-3 font-medium">TTTN Công nghệ thông tin</td><td class="p-3"><input type="text" class="user-note-input" placeholder="Ghi chú..." data-id="INT551"></td><td class="p-3 text-center font-bold">5</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA421')">GRA421</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA424')">GRA424</span></td></tr>

                        <!-- Chuyên đề / Khóa luận -->
                        <tr class="group-header"><td class="sticky left-0 bg-[#e4e6eb] dark:bg-[#242526] border-r border-gray-200 dark:border-[#3e4042]"></td><td colspan="8" class="px-4 py-2 font-semibold">Tự chọn - Chuyên đề / Khóa luận tốt nghiệp (12 tín chỉ - Chọn 1)</td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="6" data-group="TC_HK8_KLTN" data-id="GRA511" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">79</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA511</td><td class="p-3 font-medium">Chuyên đề 1: Branding (Bộ nhận diện thương hiệu)</td><td class="p-3 text-xs text-gray-500 dark:text-[#b0b3b8]">Thay thế KLTN</td><td class="p-3 text-center font-bold">6</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA421')">GRA421</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA424')">GRA424</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="6" data-group="TC_HK8_KLTN" data-id="GRA512" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">80</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">GRA512</td><td class="p-3 font-medium">Chuyên đề 2: UX-UI (Giao diện Web/App)</td><td class="p-3 text-xs text-gray-500 dark:text-[#b0b3b8]">Thay thế KLTN</td><td class="p-3 text-center font-bold">6</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA421')">GRA421</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA424')">GRA424</span></td></tr>
                        <tr class="hover:bg-gray-50 dark:hover:bg-[#3a3b3c]/50 transition-colors group"><td class="p-3 text-center sticky left-0 bg-white/95 dark:bg-[#242526]/95 group-hover:bg-gray-50 dark:group-hover:bg-[#3a3b3c]/95 border-r border-gray-200 dark:border-[#3e4042] z-10"><button class="status-btn w-6 h-6 mx-auto" data-credits="12" data-group="TC_HK8_KLTN" data-id="INT587" data-state="0"><i class="icon"></i></button></td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]">81</td><td class="p-3 text-center font-mono font-semibold text-[#0866ff] dark:text-[#60a5fa] course-code">INT587</td><td class="p-3 font-medium">Khóa luận tốt nghiệp CNTT</td><td class="p-3 text-xs text-gray-500 dark:text-[#b0b3b8]">KLTN</td><td class="p-3 text-center font-bold">12</td><td class="p-3 text-center text-gray-500 dark:text-[#b0b3b8]"></td><td class="p-3 text-center"></td><td class="p-3 text-center"><span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA421')">GRA421</span>, <span class="prereq-link" onclick="event.stopPropagation(); scrollToCourse('GRA424')">GRA424</span></td></tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // 1. Theme Logic
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const htmlElement = document.documentElement;

        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            htmlElement.classList.remove('dark');
            themeIcon.classList.replace('fa-sun', 'fa-moon');
            themeIcon.classList.remove('text-yellow-500');
            themeIcon.classList.add('text-[#050505]');
        } else {
            htmlElement.classList.add('dark'); 
        }

        themeToggleBtn.addEventListener('click', () => {
            if (htmlElement.classList.contains('dark')) {
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                themeIcon.classList.remove('text-yellow-500');
                themeIcon.classList.add('text-[#050505]');
            } else {
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                themeIcon.classList.replace('fa-moon', 'fa-sun');
                themeIcon.classList.remove('text-[#050505]');
                themeIcon.classList.add('text-yellow-500');
            }
        });

        // 2. Logic Trạng Thái Nút & Tính Toán
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const totalCreditsEl = document.getElementById('total-credits');
        const plannedCreditsEl = document.getElementById('planned-credits');
        
        // Search Inputs
        const searchInputs = {
            stt: document.getElementById('search-stt'),
            code: document.getElementById('search-code'),
            name: document.getElementById('search-name'),
            credits: document.getElementById('search-credits'),
            prereq: document.getElementById('search-prereq')
        };

        const totalPossibleCredits = 145; 
        const groupLimits = {
            'TC_HK2_1': 3, 'TC_HK2_GDTC': 1, 'TC_HK3_2': 3, 'TC_HK3_GDTC': 1,
            'TC_HK4_3': 3, 'TC_HK4_GDTC': 1, 'TC_HK5_4': 3, 'TC_HK6_1': 3,
            'TC_HK7_2': 3, 'TC_HK8_KLTN': 12
        };

        function updateBtnVisual(btn, state) {
            btn.setAttribute('data-state', state);
            while (btn.firstChild) { btn.removeChild(btn.firstChild); }
            const icon = document.createElement('i');
            icon.className = 'icon fa-solid'; 
            btn.appendChild(icon);
        }

        function updateProgress() {
            let totalCredits = 0;
            let plannedCredits = 0;
            let groupSums = {};       
            let plannedGroupSums = {}; 

            const inputs = document.querySelectorAll('.status-btn');

            inputs.forEach(el => {
                let state = parseInt(el.getAttribute('data-state') || 0);
                const credits = parseInt(el.dataset.credits || 0);
                const group = el.dataset.group;
                const row = el.closest('tr');

                row.classList.remove('planned', 'completed');
                
                if (state === 1) { 
                    row.classList.add('planned');
                    if (group) {
                        if (!plannedGroupSums[group]) plannedGroupSums[group] = 0;
                        plannedGroupSums[group] += credits;
                    } else {
                        plannedCredits += credits;
                    }
                } else if (state === 2) { 
                    row.classList.add('completed');
                    if (group) {
                        if (!groupSums[group]) groupSums[group] = 0;
                        groupSums[group] += credits;
                    } else {
                        totalCredits += credits;
                    }
                }
            });

            for (const [group, sum] of Object.entries(groupSums)) {
                const limit = groupLimits[group] || 999;
                totalCredits += Math.min(sum, limit);
            }
            for (const [group, sum] of Object.entries(plannedGroupSums)) {
                const limit = groupLimits[group] || 999;
                plannedCredits += Math.min(sum, limit); 
            }

            totalCreditsEl.innerText = totalCredits;
            if(plannedCreditsEl) plannedCreditsEl.innerText = plannedCredits;

            const percentage = Math.min(100, Math.round((totalCredits / totalPossibleCredits) * 100));
            progressBar.style.width = `${percentage}%`;
            progressText.innerText = `${percentage}%`;
        }

        // 3. Unified Search Logic
        function filterRows() {
            const terms = {
                stt: searchInputs.stt.value.toLowerCase(),
                code: searchInputs.code.value.toLowerCase(),
                name: searchInputs.name.value.toLowerCase(),
                credits: searchInputs.credits.value.toLowerCase(),
                prereq: searchInputs.prereq.value.toLowerCase()
            };

            const rows = document.querySelectorAll('#curriculum-body tr');
            let currentHeader = null;
            let visibleCountInGroup = 0;

            rows.forEach(row => {
                const firstCell = row.querySelector('td');
                // Handle headers
                if (firstCell && firstCell.classList.contains('sticky') && !row.classList.contains('group')) {
                    if (currentHeader) {
                        currentHeader.style.display = visibleCountInGroup > 0 ? '' : 'none';
                    }
                    currentHeader = row;
                    visibleCountInGroup = 0;
                    row.style.display = ''; 
                } 
                else if (row.classList.contains('group')) {
                    // Data rows
                    const sttText = row.querySelector('td:nth-child(2)')?.innerText.toLowerCase() || '';
                    const codeText = row.querySelector('td:nth-child(3)')?.innerText.toLowerCase() || '';
                    const nameText = row.querySelector('td:nth-child(4)')?.innerText.toLowerCase() || '';
                    const creditsText = row.querySelector('td:nth-child(6)')?.innerText.toLowerCase() || '';
                    const prereqText = row.querySelector('td:last-child')?.innerText.toLowerCase() || '';

                    const matches = 
                        sttText.includes(terms.stt) &&
                        codeText.includes(terms.code) &&
                        nameText.includes(terms.name) &&
                        creditsText.includes(terms.credits) &&
                        prereqText.includes(terms.prereq);

                    if (matches) {
                        row.style.display = '';
                        visibleCountInGroup++;
                    } else {
                        row.style.display = 'none';
                    }
                }
            });
            
            if (currentHeader) {
                currentHeader.style.display = visibleCountInGroup > 0 ? '' : 'none';
            }
        }

        Object.values(searchInputs).forEach(input => {
            if(input) input.addEventListener('input', filterRows);
        });

        // 4. Scroll to Course Logic
        function scrollToCourse(code) {
            const rows = document.querySelectorAll('#curriculum-body tr.group');
            let targetRow = null;
            
            document.querySelectorAll('.highlight-target').forEach(el => el.classList.remove('highlight-target'));
            
            rows.forEach(row => {
                const codeCell = row.querySelector('td:nth-child(3)');
                if (codeCell && codeCell.innerText.trim() === code) {
                    targetRow = row;
                }
            });

            if (targetRow) {
                targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                targetRow.classList.add('highlight-target');
                setTimeout(() => {
                    targetRow.classList.remove('highlight-target');
                }, 2000);
            } else {
                alert(`Môn học ${code} không tìm thấy hoặc bị ẩn.`);
            }
        }

        // Initialize Rows & Logic
        const allInputs = document.querySelectorAll('.status-btn');
        
        allInputs.forEach(el => {
            const id = el.dataset.id;
            let savedRaw = localStorage.getItem(`course_state_${id}`);
            let savedState = parseInt(savedRaw || 0);

            updateBtnVisual(el, savedState);
            
            el.addEventListener('click', () => {
                let currentState = parseInt(el.getAttribute('data-state') || 0);
                let nextState = (currentState + 1) % 3; 
                updateBtnVisual(el, nextState);
                localStorage.setItem(`course_state_${id}`, nextState);
                updateProgress();
            });
        });
        
        // Initialize Notes
        const allNoteInputs = document.querySelectorAll('.user-note-input');
        allNoteInputs.forEach(input => {
            const id = input.dataset.id;
            // Load note
            const savedNote = localStorage.getItem(`course_note_${id}`);
            if (savedNote) {
                input.value = savedNote;
            }
            
            // Save note on change
            input.addEventListener('input', (e) => {
                localStorage.setItem(`course_note_${id}`, e.target.value);
            });
        });

        updateProgress();
    </script>
</body>
</html>